#!/usr/bin/env bash
# run with `workit <tool for repl>`
# it will:
#
#   run tests in guard
#   start vim
#   start a repl/shell linked with vim so you can send commands to it
#
if [[ $1 == '-h' ]]; then
  echo "Launches vim, opens a tmux pane linked with vim and opens a split with guard"
  echo "workit <file/location to edit in vim> <screen schell command, for example pry> "
  exit 0
fi
tmux split-window -h -p 30 "source ~/.zshrc && bundle exec guard"
vim -c ":ScreenShell $2" $1
